å¹»ã®ãƒ†ã‚¹ãƒˆæŠ€æ³•ã€Œã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã€ã‚’è¿½ã„æ±‚ã‚ã¦
====

2022-12-03 [@eyasuyuki](https://twitter.com/eyasuyuki)

<!-- paginate: true -->

---

# çµè«–

- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã¯ã€


---

# çµè«–

- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã¯ã€æ„å¤–ã«ç°¡å˜ã ã£ãŸ

---

# ãã‚‚ãã‚‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã¨ã¯

![](./images/keyword-driven-example.png)


- æ“ä½œã‚’è¡¨ã™ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã€ãã®å¯¾è±¡ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã§æ§‹æˆã•ã‚ŒãŸè¡¨ã‚’ä½¿ã£ã¦è¡Œã†ãƒ†ã‚¹ãƒˆ
- äººé–“å¯èª­ã®ã‚­ãƒ¼         ãƒ¯ãƒ¼ãƒ‰è¡¨ã¨å®Ÿéš›ã®ç”»é¢ã‚’çµã³ã¤ã‘ã‚‹**ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’æ›¸ã‘ã°**è‡ªå‹•åŒ–ã§ãã‚‹

---

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã®ä½ç½®ä»˜ã‘

![width:800px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/TAK22-p138.jpg)

ã‚½ãƒ•ãƒˆã‚¦ã‚¨ã‚¢å“è³ªã‚’é«˜ã‚ã‚‹é–‹ç™ºè€…ãƒ†ã‚¹ãƒˆæ”¹è¨‚ç‰ˆ (é«˜æ©‹å¯¿ä¸€ 2022) p.138 ã‚ˆã‚Š

---

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆãŒç™»å ´ã™ã‚‹æœ¬ãã®1

- ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–æ¨™æº–ã‚¬ã‚¤ãƒ‰ (Mark Fewster, Dorothy Graham 1999)
    - ISBN978-4-7981-3921-0

![width:400px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/fewster99.jpg)

- æ¦‚å¿µçš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¯æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŒã€å…·ä½“çš„ãªå®Ÿè£…ã«ã¤ã„ã¦ã¯æ›¸ã‹ã‚Œã¦ã„ãªã„

---

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆãŒç™»å ´ã™ã‚‹æœ¬ãã®2

- ã‚½ãƒ•ãƒˆã‚¦ã‚¨ã‚¢å“è³ªã‚’é«˜ã‚ã‚‹é–‹ç™ºè€…ãƒ†ã‚¹ãƒˆæ”¹è¨‚ç‰ˆ (é«˜æ©‹å¯¿ä¸€ 2022)
    - ISBN978-4-7981-7639-0

![width:400px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/takahashi22.jpg)

- ã“ã®æœ¬ã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã‚’çŸ¥ã£ãŸã€‚ãŸã ã—æ¦‚è¦ã ã‘ã—ã‹æ›¸ã‹ã‚Œã¦ã„ãªã„

---

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã‚’çŸ¥ã£ãŸé ƒã®ãƒ„ã‚¤ãƒ¼ãƒˆ

![](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/eyasuyuki-tweet.png)

[https://twitter.com/eyasuyuki/status/1562708740243337216](https://twitter.com/eyasuyuki/status/1562708740243337216)

---

# å¹»ã®ãƒ†ã‚¹ãƒˆæŠ€æ³•?

- æ¥­ç•ŒçµŒé¨“30å¹´ä»¥ä¸Šã«ãªã‚‹ãŒã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆã‚’ã‚„ã£ã¦ã„ã‚‹äººã‚’ä¸€åº¦ã‚‚è¦‹ãŸã“ã¨ãŒãªã„

---

# æ—¢å­˜ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ãã®1

## Open2Test

[https://github.com/open2test/Open2Test_Selenium](https://github.com/open2test/Open2Test_Selenium)

### ç›®çš„ã«åˆã‚ãªã‹ã£ãŸç†ç”±

- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ã®å½¢å¼ãŒæ°—ã«å…¥ã‚‰ãªã„(ç´å“ç‰©ã«ãªã‚‰ãªã„)
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒãªã„ã®ã§è‡ªç”±ã«æ”¹é€ ã§ããªã„
- ä½™è¨ˆãªæ©Ÿèƒ½ãŒã‚ã‚‹(ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãªã©)

---

# Open2Testã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

![width:1000px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/open2test.png)

---

# æ—¢å­˜ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ãã®2

## Robot framework

[https://robotframework.org](https://robotframework.org)

### ç›®çš„ã«åˆã‚ãªã‹ã£ãŸç†ç”±

- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ã®å½¢å¼ãŒæ°—ã«å…¥ã‚‰ãªã„(ç´å“ç‰©ã«ãªã‚‰ãªã„)

---

# Robot frameworkã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹(1/2)

![width:800px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/robot1.png)

---

# Robot frameworkã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹(2/2)

![width:800px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/robot2.png)


---

# ãµã¨ã²ã‚‰ã‚ã„ãŸã‚¢ã‚¤ãƒ‡ã‚¢ğŸ’¡

![](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/eyasuyuki-tweet2.png)

[https://twitter.com/eyasuyuki/status/1562710231851073538](https://twitter.com/eyasuyuki/status/1562710231851073538)

---

# æ‹¡å¼µã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨

![width:1900px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/keyword-driven-example-extended.png)

- å°åˆ·ç¯„å›²å¤–ã®åˆ—ã«ç”»é¢ä¾å­˜ã®æƒ…å ±ã‚’æ›¸ã„ã¦ã„ã‚‹

---

# ä»Šå›é–‹ç™ºã—ãŸãƒ„ãƒ¼ãƒ«

## Keydriver
[https://github.com/eyasuyuki/keydriver](https://github.com/eyasuyuki/keydriver)

- ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§e2eãƒ†ã‚¹ãƒˆãŒã§ãã‚‹
- ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹
- å•†ç”¨åˆ©ç”¨å¯(MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹)
- æ°—ã«å…¥ã£ãŸã‚‰â˜†(Star)ãã ã•ã„ğŸ™‡

### Zennã®è¨˜äº‹

[https://zenn.dev/eyasuyuki/articles/a20301d34adce0](https://zenn.dev/eyasuyuki/articles/a20301d34adce0)

---

# å‹•ä½œæ¦‚å¿µå›³

@startuml
    Keydriver ->> POI: Excelãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
    POI ->> Excel: èª­ã¿è¾¼ã¿
    Excel ->> POI: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆ
    POI ->> Keydriver: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆ
    Keydriver ->> WebDriver: ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œ
    WebDriver ->> ãƒ–ãƒ©ã‚¦ã‚¶: ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œ
    ãƒ–ãƒ©ã‚¦ã‚¶ ->> WebDriver: ãƒ–ãƒ©ã‚¦ã‚ºçµæœ
    WebDriver ->> Keydriver: ãƒ–ãƒ©ã‚¦ã‚ºçµæœ
    Keydriver ->> Keydriver: çµæœæ¤œè¨¼
    Keydriver ->> POI: ãƒ†ã‚¹ãƒˆçµæœå‡ºåŠ›
    POI ->> Excel: ãƒ†ã‚¹ãƒˆçµæœå‡ºåŠ›
@enduml

---

# ãƒ‡ãƒ¢

[https://youtu.be/Klqx18-cBgw](https://youtu.be/Klqx18-cBgw)


---

# åˆ©ç”¨å¯èƒ½ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰

| No  | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰             | èª¬æ˜ |
-----|-------------------|-------
| 1   | open | URLã‚’é–‹ã            |
| 2   | click      | è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹         |
| 3   | select     | selectè¦ç´ ã‚’é¸æŠã™ã‚‹     |
| 4   | input      | inputè¦ç´ ã«å…¥åŠ›ã™ã‚‹      |
| 5   | clear      | inputè¦ç´ ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹     |
| 6   | accept     | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§OKã™ã‚‹        |
| 7   | dismiss    | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹     |
| 8   | capture    | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹      |
| 9   | upload     | fileè¦ç´ ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å…¥åŠ›ã™ã‚‹ |
| 10  | assert     | å€¤ã‚’æ¤œæŸ»ã™ã‚‹            |
| 11  | execute    | SQLã‚’å®Ÿè¡Œã™ã‚‹          |
| 12  | _DIRECTIVE | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰        |


â€» 1ã€œ11ã®ã©ã‚Œã«ã‚‚ä¸€è‡´ã—ãªã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒä½¿ã‚ã‚ŒãŸå ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹

â€»â€» ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯```sheet[ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆå]```ã§æŒ‡å®šã—ãŸãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚’ã‚µãƒ–ãƒ«ãƒ¼ãƒãƒ³ã®ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

---

# è¦ç´ ã‚»ãƒ¬ã‚¯ã‚¿ã®è¡¨è¨˜æ³•

```
tag[value#attribute]
```

| ã‚¿ã‚° | èª¬æ˜ |
-------|-------
| id | idè¦ç´  |
| name | nameè¦ç´  |
| xpath | xpath |

ä¾‹
```
id[save_button]
id[save_button#enabled]
name[name_input#displayed]
xpath[/html/head/title]
```

â€» ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®```attribute```ã¯```innerText```

---

# ãƒ‡ãƒ¼ã‚¿å‹

```
tag[value]
```

ä¸Šè¨˜ã®å½¢å¼ã§ä¸‹è¨˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¾ã§ãã‚‹ã€‚

| ã‚¿ã‚° | å€¤ | èª¬æ˜                                                                 |
-------|----|--------------------------------------------------------------------
| text  | æ–‡å­—åˆ— | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‡ãƒ¼ã‚¿å‹ã§ã‚ã‚‹                                                      |
| url   | URL         | HTTP-URLã‚„JDBCæ¥ç¶šURLã‚’è¡¨ç¾ã™ã‚‹                                            |
| sql | SQLæ–‡        |                                                                    |
| sheet | ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆå     | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰```_DIRECTIVE```ã¨ã¨ã‚‚ã«ä½¿ç”¨ã™ã‚‹ã€‚æŒ‡å®šã—ãŸãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚’ã‚µãƒ–ãƒ«ãƒ¼ãƒãƒ³ã®ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ |

----

# è¿°èª

```
tag[value]
```

è¿°èªã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰```assert```ã¨ã¨ã‚‚ã«ä½¿ç”¨ã™ã‚‹ã€‚ã‚¿ã‚°ã«ä¸‹è¨˜ã‚’ä½¿ã†ã“ã¨ã§ãã‚Œãã‚Œã®è¿°èªã‚’è¡¨ç¾ã§ãã‚‹ã€‚

| ã‚¿ã‚° | èª¬æ˜    |
-------|-------
| is | ç­‰ä¾¡    |
| isNot | éç­‰ä¾¡   |
| isNull | null  |
| isNotNull | énull |
| greaterThan | ã‚ˆã‚Šå¤§ãã„ |
| greaterThanEqual | ä»¥ä¸Š    |
| lessThan | ã‚ˆã‚Šå°ã•ã„ |
| lessThanEqual | ä»¥ä¸‹    |
| fail | å¤±æ•—    |

----

# Keydriverã®ãƒ¡ãƒªãƒƒãƒˆ(1/4)

- ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒè¡Œãˆã‚‹ã®ã§ã€**ãƒ“ã‚¸ãƒã‚¹ã‚´ãƒ¼ãƒ«ãŒé”æˆã•ã‚Œã‚‹ã‹ã©ã†ã‹ã®ãƒ†ã‚¹ãƒˆã«æ³¨åŠ›ã§ãã‚‹**


![width:800px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/checklist.jpg)

Copyright (c) Vector4Stock - Freepik.com


----

# Keydriverã®ãƒ¡ãƒªãƒƒãƒˆ(2/4)

- ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãŒã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ã‚’ä½œæˆã—ã€ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå®Ÿéš›ã®ç”»é¢è¦ç´ ã®ã‚»ãƒ¬ã‚¯ã‚¿ã‚’è¨˜è¿°ã™ã‚‹ã¨ã„ã£ãŸ**åˆ†æ¥­ãŒå¯èƒ½ã«ãªã‚‹**


![width:600px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/puzzle.jpg)

Copyright (c) Studiogstock - Freepik.com

----

# Keydriverã®ãƒ¡ãƒªãƒƒãƒˆ(3/4)


- ç”»é¢ãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚**ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã™ã‚‹å¿…è¦ã¯ãªã**ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã™ã‚Œã°æ¸ˆã‚€

@startuml
file ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ as k1
frame ä»–ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é§†å‹•ãƒ„ãƒ¼ãƒ« {
component Driver as d1
component Reader as r1
}
r1 -down-> d1
actor ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ as e1
actor ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ as t1
node ãƒ–ãƒ©ã‚¦ã‚¶ as b1
e1 -up->> k1: ä½œæˆ
t1 -up->> d1: ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
r1 -le->> k1: èª­ã¿è¾¼ã¿
d1 -ri->> b1: æ“ä½œ
@enduml

@startuml
file ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ as k1
frame Keydriver {
component Driver as d1
component Reader as r1
}
r1 -down-> d1
actor ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ as e1
actor ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ as t1
node ãƒ–ãƒ©ã‚¦ã‚¶ as b1
e1 -up->> k1: ä½œæˆ
t1 -up->> k1: ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
r1 -le->> k1: èª­ã¿è¾¼ã¿
d1 -ri->> b1: æ“ä½œ
@enduml


----

# Keydriverã®ãƒ¡ãƒªãƒƒãƒˆ(4/4)


- ä»–ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚’ã‚µãƒ–ãƒ«ãƒ¼ãƒãƒ³ã®ã‚ˆã†ã«å®Ÿè¡Œã§ãã‚‹ãŸã‚ã€**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®éšå±¤åŒ–ãŒå¯èƒ½**ã«ãªã‚‹


![width:600px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/puppet.png)

---

# Keydriverã‚’ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„!

[https://github.com/eyasuyuki/keydriver](https://github.com/eyasuyuki/keydriver)

![width:800px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/keydriver-github.png)

---

# ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ†ã‚¹ãƒˆã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼2022 12/3

[https://qiita.com/advent-calendar/2022/softwaretesting](https://qiita.com/advent-calendar/2022/softwaretesting)

ã“ã¡ã‚‰ã§å–ã‚Šä¸Šã’ã¦ã„ãŸã ãã¾ã—ãŸã€‚


![width:1000px](https://raw.githubusercontent.com/eyasuyuki/keydriver-lightning-talk/master/images/calendar.png)
